#
天使音乐webAPI接口文档

***

## 版本信息

|版本 | 修改日期 | 修改人 | 修改记录
:---------- |:-------------|:-----|:--------
|1.0.0 | 2016.12.1 | 王勇 | 创建文档|
|1.0.0 | 2016.12.16 | 王勇 | 添加激活码激活接口|


## 系统错误码
|错误码 | 描述 |
:--------|:-------|
-1 | 系统异常|
200 | 操作成功|
201 | 操作失败|

## 接口目录
### [1.客户端是否激活](#1)
### [2.根据二维码绑定客户端](#2)
### [3.激活码激活](#3)
### [4.上传用户信息](#4)
### [5.获取用户信息](#5)
### [6.加载主题列表](#6)
### [7.创建订单](#7)
### [8.更新订单支付结果](#8)
### [9.同步统接sdk充值流水](#9)

## 接口说明

<h3 id="1">1. 客户端是否激活</h3>

#### 接口地址

* /webapi/qrcode/clientIsActivated

#### 请求方法
* GET

#### 请求参数

参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
clientId | true |String | 客户端唯一标识

#### 调用示例

```
/webapi/qrcode/clientIsActivated?clientId=231321

```

#### 返回结果
##### json示例

```
{"code":"201213","description":"客户端已经激活过","detail":null}

```

### 错误返回值

| 错误码 | 说明 |
|:-----|:----|
| 201212 | 客户端编号为空|
| 201213| 客户端已经激活过 |
| 200| 客户端还未激活过|

<h3 id="2">2. 根据二维码绑定客户端</h3>

#### 接口地址

* /webapi/qrcode/bindClientByQRcode

#### 请求方法
* POST

#### 请求参数

参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
clientId | true |string | 客户端唯一标识
codeNo | true |string | 二维码编号

#### 调用示例
```
/webapi/qrcode/bindClientByQRcode POST方式传参数
```
#### 返回结果
##### json示例

```
{"code":"200","description":"客户端绑定成功","detail":null}
```

### 错误返回值

| 错误码 | 说明 |
|:-----|:----|
| 201212 | 客户端编号为空|
| 201215| 二维码编号为空 |
| 201216| 二维码不存在|
| 201217|二维码绑定的客户端个数已达上限|
| 200|客户端绑定成功|

<h3 id="3">3. 激活码激活</h3>



#### 接口地址



* /webapi/activationCode/activate



#### 请求方法

* POST



#### 请求参数


参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
activationCode | true |string | 激活码



#### 调用示例


```

/webapi/activationCode/activate



```



#### 返回结果

##### json示例



```

{"code":"200","description":""激活码激活成功,"detail":null}



```

### 错误返回值

| 错误码 | 说明 |
|:-----|:----|
| 200 | 激活码激活成功|
| 201220| 激活码不存在 |
| 201219| 激活码已经激活过了|
| 201218|激活码参数为空|

<h3 id="4">4.上传用户信息 </h3>



#### 接口地址



* /webapi/user/uploadUserInfo



#### 请求方法

* POST



#### 请求参数


参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
userPhone | true |string | 用户手机号

### 响应参数

参数名 | 类型 | 说明
:----------|:-----|:--------
user_id |int | 用户编号
user_name|string|用户名
user_phone|string|手机号
create_date|string|用户创建时间

#### 调用示例


```

/webapi/user/uploadUserInfo

```



#### 返回结果

##### json示例



```

{"code":"201222","description":"上传用户信息成功","detail":{"user_id":1,"user_name":"","user_phone":"13584040966","create_date":"2016-12-26 14:00:49"}}

```

### 错误返回值

| 错误码 | 说明 |
|:-----|:----|
| 200 | 上传用户信息成功|
| 201221| 用户手机号为空 |
| 201222| 用户信息已经存在|
| 201|上传用户信息失败|

<h3 id="5">5.获取用户信息 </h3>



#### 接口地址



* /webapi/user/getUserInfo



#### 请求方法

* get



#### 请求参数


参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
userPhone | true |string | 用户手机号

### 响应参数

参数名 | 类型 | 说明
:----------|:-----|:--------
user_id |int | 用户编号
user_name|string|用户名
user_phone|string|手机号
create_date|string|用户创建时间

#### 调用示例


```

/webapi/user/getUser

```



#### 返回结果

##### json示例



```
{"code":"200","description":"操作成功","detail":{"user_id":1,"user_name":"","user_phone":"13584040966","create_date":"2016-12-26 14:00:49"}}

```

### 错误返回值

| 错误码 | 说明 |
|:-----|:----|
| 200 | 操作成功|
| 201221| 用户手机号为空 |

<h3 id="6">6.加载主题列表 </h3>



#### 接口地址



* /webapi/topic/loadTopicList



#### 请求方法

* get



#### 请求参数


参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
userPhone | true |string | 用户手机号

### 响应参数

参数名 | 类型 | 说明
:----------|:-----|:--------
topic_id |int | 主题编号
name |string | 主题名
topic_desc|string|主题描述
lock|int | 是否锁住(1锁住2不锁住)
free|string|是否免费(1收费2免费3试看)
topic_date|string|主题释放时间

#### 调用示例


```

/webapi/topic/loadTopicList


```



#### 返回结果

##### json示例



```
{"code":"200","description":"主题加载成功","detail":[{"topic_date":"2016-01-01","name":"试看内容","lock":2,"topic_id":1,"free":3,"topic_desc":"试看内容"},{"topic_date":"2016-02-01","name":"主题2","lock":1,"topic_id":2,"free":1,"topic_desc":"主题2"},{"topic_date":"2016-03-01","name":"主题3","lock":1,"topic_id":3,"free":1,"topic_desc":"主题3"},{"topic_date":"2016-04-01","name":"主题4","lock":1,"topic_id":4,"free":1,"topic_desc":"主题4"},{"topic_date":"2016-05-01","name":"主题5","lock":1,"topic_id":5,"free":1,"topic_desc":"主题5"},{"topic_date":"2016-06-01","name":"主题6","lock":1,"topic_id":6,"free":1,"topic_desc":"主题6"},{"topic_date":"2016-07-01","name":"主题7","lock":1,"topic_id":7,"free":1,"topic_desc":"主题7"},{"topic_date":"2016-08-01","name":"主题8","lock":1,"topic_id":8,"free":1,"topic_desc":"主题8"},{"topic_date":"2016-09-01","name":"主题9","lock":1,"topic_id":9,"free":1,"topic_desc":"主题9"},{"topic_date":"2016-10-01","name":"主题10","lock":1,"topic_id":10,"free":1,"topic_desc":"主题10"},{"topic_date":"2016-11-01","name":"主题11","lock":1,"topic_id":11,"free":1,"topic_desc":"主题11"}]}

```

### 错误返回值

| 错误码 | 说明 |
|:-----|:----|
| 200 | 主题加载成功|
| 201221| 用户手机号为空 |

<h3 id="7">7.创建订单 </h3>



#### 接口地址



* /webapi/order/createOrderRecord



#### 请求方法

* POST



#### 请求参数


参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
userPhone | true |string | 用户手机号
money|true|string|消费金额
product|true|string|产品编号(二维码，大礼包)
type|true|int|产品类型(1激活码2大礼包)

### 响应参数

参数名 | 类型 | 说明
:----------|:-----|:--------
order_id |string | 订单编号
user_name|string|用户名
money|string|消费金额
order_date|string|订单创建时间
product|string|产品编号
type|int|支付类型
pay_result|int|支付结果

#### 调用示例


```


```



#### 返回结果

##### json示例

```
{"code":"200","description":"订单生成成功","detail":{"order_date":"2016-12-26","product":"123456789","money":"160","user_phone":"13584040966","type":1,"order_id":"35a7dc5d-424e-4809-abec-46bf30d103fb","pay_result":3}}

```

### 错误返回值

| 错误码 | 说明 |
|:-----|:----|
| 200 | 订单生成成功|
|201224|订单生成失败|
| 201225| 用户编号,消费金额，产品，支付类型不可以为空 |
|201228|订单金额不可以小于0|
|201229|订单类型只能是激活码和大礼包|

<h3 id="8">8.更新订单支付结果 </h3>



#### 接口地址



* /webapi/order/updateOrderPayResult



#### 请求方法

* POST



#### 请求参数


参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
orderId | true |string | 订单编号
payResult|true|int|支付结果(1成功2失败3支付中)

#### 调用示例


```
```
#### 返回结果

##### json示例

```
{"code":"200","description":"订单生成成功","detail":{"order_date":"2016-12-26","product":"123456789","money":"160","user_phone":"13584040966","type":1,"order_id":"35a7dc5d-424e-4809-abec-46bf30d103fb","pay_result":3}}

```

### 错误返回值

| 错误码 | 说明 |
|:-----|:----|
| 200 | 订单更新成功|
|201224|订单生成失败|
|201225|订单号和支付结果不可以为空 |


<h3 id="9">9.同步统接sdk充值流水 </h3>



#### 接口地址



* /webapi/order/synTJsdkRechargeRecord



#### 请求方法

* POST



#### 请求参数


参数名 | 是否必传 | 类型 | 说明
:---------- |:-------------|:-----|:--------
orderId | true |string | 统接订单编号
chargeStatus|true|string|订单状态
chargeMsg|true|string|订单状态描述
price|true|string|订单价格()分
cpparam|true|string|透传参数(一般为订单号)
paytype|true|string|支付类型 1移动 2联通 3电信 4支付宝 5微信 6其他或未知
encryptdata|true|加密校验数据

#### 调用示例


```

```
#### 返回结果

##### json示例

```
{"code":"200","description":"订单生成成功","detail":{"order_date":"2016-12-26","product":"123456789","money":"160","user_phone":"13584040966","type":1,"order_id":"35a7dc5d-424e-4809-abec-46bf30d103fb","pay_result":3}}

```

### 错误返回值

| 错误码 | 说明 |
|:-----|:----|
| 200 | 数据同步成功|
|201227|统接密码不正确|
|201225|订单号和支付结果不可以为空 |