<?xml version='1.0' encoding='UTF-8'?>

<root>
    <!--二维码-->
    <sqlGroup name="qrcode">
        <sql id="getQRcodeBycodeNo">select qrcode_id,qrcode_no from am_qrcode where qrcode_no=?</sql>
    </sqlGroup>

    <!--跟二维码绑定的客户端-->
    <sqlGroup name="qrcodeclient">
        <sql id="getBindClientCount">select count(1) from am_qrcode_client where client_id=?</sql>
        <sql id="getBindQrodeClientCount">select count(1) from am_qrcode_client where where qrcode_no = ?</sql>
    </sqlGroup>

    <!--激活码-->
    <sqlGroup name="activationCode">
        <sql id="getActivationCodeByCode">select id,code,status from am_activation_code where code =?</sql>
        <sql id="updateActivationCodeStatus">update am_activation_code set status=? where code=?</sql>
    </sqlGroup>

    <!--用户信息-->
    <sqlGroup name="user">
        <sql id="getUserByPhone">select user_id,user_name,user_phone,create_date,total_recharge from am_user</sql>
    </sqlGroup>

    <!--主题信息-->
    <sqlGroup name="topic">
        <sql id="allTopic">select topic_id,name,topic_desc,topic_date,free from am_topic order by topic_date</sql>
        <sql id="getNotFreeTopicCount">select count(1) from am_topic where free=1</sql>
        <sql id="getTopic">select * from am_topic where topic_id=?</sql>
    </sqlGroup>

    <!--获取用户订购成功的最新的订单记录-->
    <sqlGroup name="order">
        <sql id="getOrderCountByUserId">select count(1) from am_order_record order by order_date desc where user_id=?
            and payresult=1
        </sql>
        <sql id="getOrderList">select * from am_order_record where pay_result =1 and user_id=?</sql>
        <sql id="updateOrderRecord">update am_order_record set pay_result =? where order_id=?</sql>
    </sqlGroup>

    <!--大礼包-->
    <sqlGroup name="giftPack">
        <sql id="getGiftPackByName">select * from am_gift_pack where gift_pack_name=?</sql>
    </sqlGroup>

    <!--内容-->
    <sqlGroup name="content">
        <sql id="getTopicContentList">select * from am_topic_content tc left join am_content c on tc.content_id =
            c.content_id where tc.topic_id =1 order by `order`
        </sql>
    </sqlGroup>


</root>